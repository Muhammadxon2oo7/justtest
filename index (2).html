<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>“≤—É–¥—É–¥–∏–π —Ç–µ–Ω–≥—Å–∏–∑–ª–∏–∫ —Ç–∞“≥–ª–∏–ª–∏ - “≤–æ—Ä–∞–∑–º –≤–∏–ª–æ—è—Ç–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a5f7a;
            --secondary-color: #159895;
            --accent-color: #57c5b6;
            --light-color: #f8f9fa;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin: 20px auto;
            max-width: 1400px;
        }
        
        .header-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px;
            border-radius: 20px 20px 0 0;
            text-align: center;
        }
        
        .header-section h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .nav-tabs {
            border-bottom: 2px solid var(--accent-color);
            padding: 0 20px;
            flex-wrap: nowrap;
            overflow-x: auto;
        }
        
        .nav-tabs .nav-link {
            color: var(--primary-color);
            font-weight: 600;
            border: none;
            padding: 15px 20px;
            white-space: nowrap;
        }
        
        .nav-tabs .nav-link.active {
            background: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        .tab-content {
            padding: 25px;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px 15px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
        }
        
        .indicator-group {
            background: var(--light-color);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .indicator-group h5 {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-color);
        }
        
        .form-control {
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            padding: 6px 10px;
            font-size: 0.9rem;
        }
        
        .form-control:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(87, 197, 182, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 600;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            border: none;
            border-radius: 10px;
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            border-radius: 10px;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #6f42c1);
            border: none;
            border-radius: 10px;
            color: white;
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        .result-card .value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .result-card .label {
            color: #666;
            font-size: 0.85rem;
        }
        
        .table thead {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .table thead th {
            border: none;
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .cluster-card {
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }
        
        .cluster-header-1 { background: linear-gradient(135deg, #28a745, #20c997); color: white; }
        .cluster-header-2 { background: linear-gradient(135deg, #17a2b8, #0dcaf0); color: white; }
        .cluster-header-3 { background: linear-gradient(135deg, #ffc107, #fd7e14); color: #333; }
        .cluster-header-4 { background: linear-gradient(135deg, #dc3545, #c82333); color: white; }
        
        .cluster-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            color: white;
            margin: 2px;
        }
        
        .cluster-1 { background: #28a745; }
        .cluster-2 { background: #17a2b8; }
        .cluster-3 { background: #ffc107; color: #333; }
        .cluster-4 { background: #dc3545; }
        
        .recommendation-card {
            background: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 0 10px 10px 0;
        }
        
        .recommendation-card.economic { border-left-color: #28a745; }
        .recommendation-card.social { border-left-color: #17a2b8; }
        .recommendation-card.demographic { border-left-color: #ffc107; }
        .recommendation-card.infrastructure { border-left-color: #dc3545; }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .district-input {
            margin-bottom: 8px;
        }
        
        .district-label {
            font-weight: 500;
            color: #333;
            font-size: 0.75rem;
            display: block;
            margin-bottom: 2px;
        }
        
        .year-selector {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .strategy-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: white;
        }
        
        .strategy-icon.economic { background: #28a745; }
        .strategy-icon.social { background: #17a2b8; }
        .strategy-icon.demographic { background: #6f42c1; }
        .strategy-icon.infrastructure { background: #fd7e14; }
        
        @media print {
            .no-print { display: none !important; }
            .main-container { box-shadow: none; margin: 0; }
            body { background: white; }
        }
        
        @media (max-width: 768px) {
            .header-section h1 { font-size: 1.3rem; }
            .result-card .value { font-size: 1.5rem; }
            .tab-content { padding: 15px; }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="text-center text-white">
            <div class="loading-spinner mb-3"></div>
            <h4>–¢–∞“≥–ª–∏–ª –±–∞–∂–∞—Ä–∏–ª–º–æ“õ–¥–∞...</h4>
        </div>
    </div>

    <div class="container-fluid main-container">
        <!-- Header -->
        <div class="header-section">
            <h1><i class="bi bi-graph-up-arrow"></i> “≤–£–î–£–î–ò–ô –¢–ï–ù–ì–°–ò–ó–õ–ò–ö –¢–ê“≤–õ–ò–õ–ò</h1>
            <p class="mb-0">“≤–æ—Ä–∞–∑–º –≤–∏–ª–æ—è—Ç–∏ —Ç—É–º–∞–Ω–ª–∞—Ä–∏ –∏–∂—Ç–∏–º–æ–∏–π-–∏“õ—Ç–∏—Å–æ–¥–∏–π —Ä–∏–≤–æ–∂–ª–∞–Ω–∏—à –¥–∞—Ä–∞–∂–∞—Å–∏–Ω–∏ –±–∞“≥–æ–ª–∞—à</p>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs no-print" id="mainTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#inputSection">
                    <i class="bi bi-input-cursor-text"></i> –ú–∞—ä–ª—É–º–æ—Ç –∫–∏—Ä–∏—Ç–∏—à
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#resultsSection">
                    <i class="bi bi-bar-chart-fill"></i> –ù–∞—Ç–∏–∂–∞–ª–∞—Ä
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#clusterSection">
                    <i class="bi bi-diagram-3-fill"></i> –ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#strategySection">
                    <i class="bi bi-lightbulb-fill"></i> –¢–∞–≤—Å–∏—è–ª–∞—Ä
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#helpSection">
                    <i class="bi bi-question-circle"></i> –ô—û—Ä–∏“õ–Ω–æ–º–∞
                </a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            
            <!-- ==================== INPUT SECTION ==================== -->
            <div class="tab-pane fade show active" id="inputSection">
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="year-selector">
                            <label class="form-label fw-bold"><i class="bi bi-calendar3"></i> –¢–∞“≥–ª–∏–ª –π–∏–ª–∏:</label>
                            <select class="form-select" id="analysisYear">
                                <option value="2014">2014</option>
                                <option value="2015">2015</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024" selected>2024</option>
                                <option value="2025">2025</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="year-selector">
                            <label class="form-label fw-bold"><i class="bi bi-lightning-fill"></i> –¢–µ–∑–∫–æ—Ä –∞–º–∞–ª–ª–∞—Ä:</label>
                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn btn-warning" onclick="loadSampleData()">
                                    <i class="bi bi-database-fill"></i> –ù–∞–º—É–Ω–∞–≤–∏–π –º–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä
                                </button>
                                <button class="btn btn-info" onclick="clearAllData()">
                                    <i class="bi bi-trash"></i> –¢–æ–∑–∞–ª–∞—à
                                </button>
                                <button class="btn btn-success" onclick="runAnalysis()">
                                    <i class="bi bi-play-circle-fill"></i> –¢–ê“≤–õ–ò–õ–ù–ò –ë–û–®–õ–ê–®
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Indicator Forms -->
                <div id="indicatorForms"></div>

                <div class="text-center mt-4 no-print">
                    <button class="btn btn-primary btn-lg" onclick="runAnalysis()">
                        <i class="bi bi-play-circle-fill"></i> –¢–ê“≤–õ–ò–õ–ù–ò –ë–û–®–õ–ê–®
                    </button>
                </div>
            </div>

            <!-- ==================== RESULTS SECTION ==================== -->
            <div class="tab-pane fade" id="resultsSection">
                <div id="resultsContent">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> –ù–∞—Ç–∏–∂–∞–ª–∞—Ä–Ω–∏ –∫—û—Ä–∏—à —É—á—É–Ω –∞–≤–≤–∞–ª –º–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä–Ω–∏ –∫–∏—Ä–∏—Ç–∏–Ω–≥ –≤–∞ "–¢–∞“≥–ª–∏–ª–Ω–∏ –±–æ—à–ª–∞—à" —Ç—É–≥–º–∞—Å–∏–Ω–∏ –±–æ—Å–∏–Ω–≥.
                    </div>
                </div>
            </div>

            <!-- ==================== CLUSTER SECTION ==================== -->
            <div class="tab-pane fade" id="clusterSection">
                <div id="clusterContent">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> –ö–ª–∞—Å—Ç–µ—Ä —Ç–∞“≥–ª–∏–ª–∏ –Ω–∞—Ç–∏–∂–∞–ª–∞—Ä–∏–Ω–∏ –∫—û—Ä–∏—à —É—á—É–Ω –∞–≤–≤–∞–ª —Ç–∞“≥–ª–∏–ª–Ω–∏ –±–∞–∂–∞—Ä–∏–Ω–≥.
                    </div>
                </div>
            </div>

            <!-- ==================== STRATEGY SECTION ==================== -->
            <div class="tab-pane fade" id="strategySection">
                <div id="strategyContent">
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> –°—Ç—Ä–∞—Ç–µ–≥–∏–∫ —Ç–∞–≤—Å–∏—è–ª–∞—Ä–Ω–∏ –∫—û—Ä–∏—à —É—á—É–Ω –∞–≤–≤–∞–ª —Ç–∞“≥–ª–∏–ª–Ω–∏ –±–∞–∂–∞—Ä–∏–Ω–≥.
                    </div>
                </div>
            </div>

            <!-- ==================== HELP SECTION ==================== -->
            <div class="tab-pane fade" id="helpSection">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <i class="bi bi-book"></i> –¢–µ–Ω–≥—Å–∏–∑–ª–∏–∫ –∫—û—Ä—Å–∞—Ç–∫–∏—á–ª–∞—Ä–∏
                            </div>
                            <div class="card-body">
                                <table class="table table-sm">
                                    <tr><td><strong>CV</strong></td><td>–í–∞—Ä–∏–∞—Ü–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∏ (< 20% –ø–∞—Å—Ç, 20-35% —û—Ä—Ç–∞—á–∞, > 35% —é“õ–æ—Ä–∏)</td></tr>
                                    <tr><td><strong>–ñ–∏–Ω–∏</strong></td><td>0 –¥–∞–Ω 1 –≥–∞—á–∞. –Æ“õ–æ—Ä–∏ = –∫—û–ø —Ç–µ–Ω–≥—Å–∏–∑–ª–∏–∫</td></tr>
                                    <tr><td><strong>–¢–µ–π–ª</strong></td><td>–≠–Ω—Ç—Ä–æ–ø–∏—è–≥–∞ –∞—Å–æ—Å–ª–∞–Ω–≥–∞–Ω —û–ª—á–æ–≤</td></tr>
                                    <tr><td><strong>–î–µ—Ü–∏–ª</strong></td><td>D9/D1 –Ω–∏—Å–±–∞—Ç–∏</td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <i class="bi bi-diagram-3"></i> –ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä —Ç–∞–≤—Å–∏—Ñ–∏
                            </div>
                            <div class="card-body">
                                <p><span class="cluster-badge cluster-1">–ö–ª–∞—Å—Ç–µ—Ä 1</span> –Æ“õ–æ—Ä–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω (–∏–Ω–¥–µ–∫—Å: 0.70-1.00)</p>
                                <p><span class="cluster-badge cluster-2">–ö–ª–∞—Å—Ç–µ—Ä 2</span> –é—Ä—Ç–∞—á–∞ —é“õ–æ—Ä–∏ (–∏–Ω–¥–µ–∫—Å: 0.50-0.70)</p>
                                <p><span class="cluster-badge cluster-3">–ö–ª–∞—Å—Ç–µ—Ä 3</span> –é—Ä—Ç–∞—á–∞ –ø–∞—Å—Ç (–∏–Ω–¥–µ–∫—Å: 0.35-0.50)</p>
                                <p><span class="cluster-badge cluster-4">–ö–ª–∞—Å—Ç–µ—Ä 4</span> –ü–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω (–∏–Ω–¥–µ–∫—Å: 0.00-0.35)</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header">
                        <i class="bi bi-list-check"></i> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–∏ (4 –π—û–Ω–∞–ª–∏—à √ó 5 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä = 20 —Ç–∞)
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <h6 class="text-success"><i class="bi bi-currency-dollar"></i> –ò“ö–¢–ò–°–û–î–ò–ô</h6>
                                <small>E1: –°–∞–Ω–æ–∞—Ç –º–∞“≥—Å—É–ª–æ—Ç–∏<br>E2: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–ª–∞—Ä<br>E3: –ö–∏—á–∏–∫ –±–∏–∑–Ω–µ—Å<br>E4: –ß–∞–∫–∞–Ω–∞ —Å–∞–≤–¥–æ<br>E5: “ö/—Ö –º–∞“≥—Å—É–ª–æ—Ç–∏</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-info"><i class="bi bi-people-fill"></i> –ò–ñ–¢–ò–ú–û–ò–ô</h6>
                                <small>S1: –î–∞—Ä–æ–º–∞–¥<br>S2: –£–π-–∂–æ–π<br>S3: –ò—à—Å–∏–∑–ª–∏–∫<br>S4: –•–∏–∑–º–∞—Ç–ª–∞—Ä<br>S5: –ò—Å—Ç–µ—ä–º–æ–ª</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-purple"><i class="bi bi-person-lines-fill"></i> –î–ï–ú–û–ì–†–ê–§–ò–ö</h6>
                                <small>D1: –ê“≥–æ–ª–∏ —Å–æ–Ω–∏<br>D2: –¢—É“ì–∏–ª–∏—à<br>D3: –é–ª–∏–º<br>D4: –¢–∞–±–∏–∏–π —û—Å–∏—à<br>D5: –ú–µ“≥–Ω–∞—Ç —Ä–µ—Å—É—Ä—Å–ª–∞—Ä–∏</small>
                            </div>
                            <div class="col-md-3">
                                <h6 class="text-warning"><i class="bi bi-building"></i> –ò–ù–§–†–ê–¢–£–ó–ò–õ–ú–ê</h6>
                                <small>I1: –®–∏—Ñ–æ—Ö–æ–Ω–∞–ª–∞—Ä<br>I2: –í—Ä–∞—á–ª–∞—Ä<br>I3: –ú–∞–∫—Ç–∞–±–ª–∞—Ä<br>I4: –ú–¢–¢ “õ–∞–º—Ä–æ–≤–∏<br>I5: –ò—á–∏–º–ª–∏–∫ —Å—É–≤–∏</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // =====================================================
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        // =====================================================
        
        const DISTRICTS = [
            "–£—Ä–≥–∞–Ω—á —à–∞“≥—Ä–∏", "–•–∏–≤–∞ —à–∞“≥—Ä–∏", "–ë–æ“ì–æ—Ç —Ç—É–º–∞–Ω–∏", "–ì—É—Ä–ª–∞–Ω —Ç—É–º–∞–Ω–∏",
            "–•–∞–∑–æ—Ä–∞—Å–ø —Ç—É–º–∞–Ω–∏", "–•–æ–Ω“õ–∞ —Ç—É–º–∞–Ω–∏", "–•–∏–≤–∞ —Ç—É–º–∞–Ω–∏", "“ö—û—à–∫—û–ø–∏—Ä —Ç—É–º–∞–Ω–∏",
            "–®–æ–≤–æ—Ç —Ç—É–º–∞–Ω–∏", "–£—Ä–≥–∞–Ω—á —Ç—É–º–∞–Ω–∏", "–Ø–Ω–≥–∏–∞—Ä–∏“õ —Ç—É–º–∞–Ω–∏", "–Ø–Ω–≥–∏–±–æ–∑–æ—Ä —Ç—É–º–∞–Ω–∏",
            "–¢—É–ø—Ä–æ“õ“õ–∞–ª—ä–∞ —Ç—É–º–∞–Ω–∏"
        ];

        const INDICATORS = {
            "–ò“ö–¢–ò–°–û–î–ò–ô": {
                "E1": {name: "–ê“≥–æ–ª–∏ –∂–æ–Ω –±–æ—à–∏–≥–∞ —Å–∞–Ω–æ–∞—Ç –º–∞“≥—Å—É–ª–æ—Ç–∏", unit: "–º–∏–Ω–≥ —Å—û–º"},
                "E2": {name: "–ê—Å–æ—Å–∏–π –∫–∞–ø–∏—Ç–∞–ª–≥–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–ª–∞—Ä", unit: "–º–ª–Ω —Å—û–º"},
                "E3": {name: "–ö–∏—á–∏–∫ –±–∏–∑–Ω–µ—Å —Å—É–±—ä–µ–∫—Ç–ª–∞—Ä–∏ —Å–æ–Ω–∏", unit: "–±–∏—Ä–ª–∏–∫"},
                "E4": {name: "–ß–∞–∫–∞–Ω–∞ —Å–∞–≤–¥–æ –∞–π–ª–∞–Ω–º–∞—Å–∏", unit: "–º–ª–Ω —Å—û–º"},
                "E5": {name: "“ö–∏—à–ª–æ“õ —Ö—û–∂–∞–ª–∏–≥–∏ –º–∞“≥—Å—É–ª–æ—Ç–∏", unit: "–º–ª–Ω —Å—û–º"}
            },
            "–ò–ñ–¢–ò–ú–û–ò–ô": {
                "S1": {name: "–ê“≥–æ–ª–∏–Ω–∏–Ω–≥ —û—Ä—Ç–∞—á–∞ –æ–π–ª–∏–∫ –¥–∞—Ä–æ–º–∞–¥–∏", unit: "–º–∏–Ω–≥ —Å—û–º"},
                "S2": {name: "–£–π-–∂–æ–π –±–∏–ª–∞–Ω —Ç–∞—ä–º–∏–Ω–ª–∞–Ω–∏—à", unit: "–º¬≤/–∫–∏—à–∏"},
                "S3": {name: "–ò—à—Å–∏–∑–ª–∏–∫ –¥–∞—Ä–∞–∂–∞—Å–∏", unit: "%", reverse: true},
                "S4": {name: "–ö—û—Ä—Å–∞—Ç–∏–ª–≥–∞–Ω —Ö–∏–∑–º–∞—Ç–ª–∞—Ä “≥–∞–∂–º–∏", unit: "–º–ª–Ω —Å—û–º"},
                "S5": {name: "–ò—Å—Ç–µ—ä–º–æ–ª —Ö–∞—Ä–∞–∂–∞—Ç–ª–∞—Ä–∏", unit: "–º–∏–Ω–≥ —Å—û–º"}
            },
            "–î–ï–ú–û–ì–†–ê–§–ò–ö": {
                "D1": {name: "–ê“≥–æ–ª–∏ —Å–æ–Ω–∏", unit: "–º–∏–Ω–≥ –∫–∏—à–∏"},
                "D2": {name: "–¢—É“ì–∏–ª–∏—à –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∏", unit: "‚Ä∞"},
                "D3": {name: "–é–ª–∏–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∏", unit: "‚Ä∞", reverse: true},
                "D4": {name: "–¢–∞–±–∏–∏–π —û—Å–∏—à", unit: "‚Ä∞"},
                "D5": {name: "–ú–µ“≥–Ω–∞—Ç–≥–∞ –ª–∞—ë“õ–∞—Ç–ª–∏ –∞“≥–æ–ª–∏ —É–ª—É—à–∏", unit: "%"}
            },
            "–ò–ù–§–†–ê–¢–£–ó–ò–õ–ú–ê": {
                "I1": {name: "10000 –∞“≥–æ–ª–∏–≥–∞ —à–∏—Ñ–æ—Ö–æ–Ω–∞ –∫—û–π–∫–∞–ª–∞—Ä–∏", unit: "–±–∏—Ä–ª–∏–∫"},
                "I2": {name: "10000 –∞“≥–æ–ª–∏–≥–∞ –≤—Ä–∞—á–ª–∞—Ä —Å–æ–Ω–∏", unit: "–∫–∏—à–∏"},
                "I3": {name: "–£–º—É–º—Ç–∞—ä–ª–∏–º –º–∞–∫—Ç–∞–±–ª–∞—Ä–∏ —Å–æ–Ω–∏", unit: "–±–∏—Ä–ª–∏–∫"},
                "I4": {name: "–ú–∞–∫—Ç–∞–±–≥–∞—á–∞ —Ç–∞—ä–ª–∏–º “õ–∞–º—Ä–æ–≤–∏", unit: "%"},
                "I5": {name: "–ò—á–∏–º–ª–∏–∫ —Å—É–≤–∏ –±–∏–ª–∞–Ω —Ç–∞—ä–º–∏–Ω–ª–∞–Ω–∏—à", unit: "%"}
            }
        };

        const DIRECTION_ICONS = {
            "–ò“ö–¢–ò–°–û–î–ò–ô": "bi-currency-dollar",
            "–ò–ñ–¢–ò–ú–û–ò–ô": "bi-people-fill",
            "–î–ï–ú–û–ì–†–ê–§–ò–ö": "bi-person-lines-fill",
            "–ò–ù–§–†–ê–¢–£–ó–ò–õ–ú–ê": "bi-building"
        };

        const DIRECTION_COLORS = {
            "–ò“ö–¢–ò–°–û–î–ò–ô": "#28a745",
            "–ò–ñ–¢–ò–ú–û–ò–ô": "#17a2b8",
            "–î–ï–ú–û–ì–†–ê–§–ò–ö": "#6f42c1",
            "–ò–ù–§–†–ê–¢–£–ó–ò–õ–ú–ê": "#fd7e14"
        };

        // =====================================================
        // –°–¢–†–ê–¢–ï–ì–ò–ö –¢–ê–í–°–ò–Ø–õ–ê–† –ë–ê–ó–ê–°–ò
        // =====================================================
        
        const STRATEGIC_RECOMMENDATIONS = {
            1: { // –ö–ª–∞—Å—Ç–µ—Ä 1 - –Æ“õ–æ—Ä–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω
                title: "–Æ“ö–û–†–ò –†–ò–í–û–ñ–õ–ê–ù–ì–ê–ù –¢–£–ú–ê–ù–õ–ê–†",
                indexRange: "0.70 - 1.00",
                color: "#28a745",
                characteristics: [
                    "–Æ“õ–æ—Ä–∏ —Å–∞–Ω–æ–∞—Ç –≤–∞ —Ö–∏–∑–º–∞—Ç–ª–∞—Ä —Å–∞–ª–æ“≥–∏—è—Ç–∏",
                    "–Ø—Ö—à–∏ –∏–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞",
                    "–Æ“õ–æ—Ä–∏ –¥–∞—Ä–æ–º–∞–¥ –¥–∞—Ä–∞–∂–∞—Å–∏",
                    "–í–∏–ª–æ—è—Ç –º–∞—Ä–∫–∞–∑–∏ –≤–∞ —à–∞“≥–∞—Ä–ª–∞—Ä"
                ],
                recommendations: {
                    economic: [
                        {action: "–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω –∫–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä –≤–∞ —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫–ª–∞—Ä–Ω–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω—Ç–∏—Ä–∏—à", result: "–Æ“õ–æ—Ä–∏ “õ—û—à–∏–º—á–∞ “õ–∏–π–º–∞—Ç–ª–∏ –º–∞“≥—Å—É–ª–æ—Ç–ª–∞—Ä –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏—à"},
                        {action: "“ö—û—à–Ω–∏ —Ç—É–º–∞–Ω–ª–∞—Ä–≥–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –æ“õ–∏–º–∏–Ω–∏ –π—û–Ω–∞–ª—Ç–∏—Ä–∏—à –º–µ—Ö–∞–Ω–∏–∑–º–ª–∞—Ä–∏–Ω–∏ —è—Ä–∞—Ç–∏—à", result: "“≤—É–¥—É–¥–∏–π —Ç–µ–Ω–≥—Å–∏–∑–ª–∏–∫–Ω–∏ –∫–∞–º–∞–π—Ç–∏—Ä–∏—à"},
                        {action: "–≠–∫—Å–ø–æ—Ä—Ç–≥–∞ –π—û–Ω–∞–ª—Ç–∏—Ä–∏–ª–≥–∞–Ω –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏—à–Ω–∏ –∫—û–ø–∞–π—Ç–∏—Ä–∏—à", result: "–í–∞–ª—é—Ç–∞ —Ç—É—à—É–º–∏ –≤–∞ –∏—à —û—Ä–∏–Ω–ª–∞—Ä–∏"}
                    ],
                    social: [
                        {action: "–Æ“õ–æ—Ä–∏ –º–∞–ª–∞–∫–∞–ª–∏ –∫–∞–¥—Ä–ª–∞—Ä —Ç–∞–π—ë—Ä–ª–∞—à –º–∞—Ä–∫–∞–∑–ª–∞—Ä–∏–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–ë—É—Ç—É–Ω –≤–∏–ª–æ—è—Ç —É—á—É–Ω –∫–∞–¥—Ä–ª–∞—Ä –±–∞–∑–∞—Å–∏"},
                        {action: "–ò–ª–º–∏–π-—Ç–∞–¥“õ–∏“õ–æ—Ç –º–∞—Ä–∫–∞–∑–ª–∞—Ä–∏–Ω–∏ “õ—É—Ä–∏—à", result: "–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω —Ä–∏–≤–æ–∂–ª–∞–Ω–∏—à"}
                    ],
                    demographic: [
                        {action: "–ò—á–∫–∏ –º–∏–≥—Ä–∞—Ü–∏—è–Ω–∏ –±–æ—à“õ–∞—Ä–∏—à, –∞—Ç—Ä–æ—Ñ —Ç—É–º–∞–Ω–ª–∞—Ä–¥–∞ –∏—à —û—Ä–∏–Ω–ª–∞—Ä–∏ —è—Ä–∞—Ç–∏—à", result: "–ê“≥–æ–ª–∏ —Ç—û–ø–ª–∞–Ω–∏—à–∏–Ω–∏ –∫–∞–º–∞–π—Ç–∏—Ä–∏—à"},
                        {action: "–®–∞“≥–∞—Ä –∞—Ç—Ä–æ—Ñ–∏–¥–∞ —è–Ω–≥–∏ –∞“≥–æ–ª–∏ –ø—É–Ω–∫—Ç–ª–∞—Ä–∏–Ω–∏ —Ä–µ–∂–∞–ª–∞—à—Ç–∏—Ä–∏—à", result: "–ú—É–≤–æ–∑–∞–Ω–∞—Ç–ª–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω–∏—à"}
                    ],
                    infrastructure: [
                        {action: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç-–ª–æ–≥–∏—Å—Ç–∏–∫–∞ –º–∞—Ä–∫–∞–∑–ª–∞—Ä–∏ “õ—É—Ä–∏—à", result: "–ê—Ç—Ä–æ—Ñ —Ç—É–º–∞–Ω–ª–∞—Ä–Ω–∏ “≥–∞–º “õ–∞–º—Ä–∞–± –æ–ª–∏—à"},
                        {action: "–†–∞“õ–∞–º–ª–∏ –∏–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞–Ω–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω—Ç–∏—Ä–∏—à", result: "IT —Ö–∏–∑–º–∞—Ç–ª–∞—Ä –º–∞—Ä–∫–∞–∑–∏"}
                    ]
                }
            },
            2: { // –ö–ª–∞—Å—Ç–µ—Ä 2 - –é—Ä—Ç–∞—á–∞ —é“õ–æ—Ä–∏
                title: "–é–†–¢–ê–ß–ê –Æ“ö–û–†–ò –†–ò–í–û–ñ–õ–ê–ù–ì–ê–ù –¢–£–ú–ê–ù–õ–ê–†",
                indexRange: "0.50 - 0.70",
                color: "#17a2b8",
                characteristics: [
                    "–é—Ä—Ç–∞—á–∞–¥–∞–Ω —é“õ–æ—Ä–∏ –∏“õ—Ç–∏—Å–æ–¥–∏–π –∫—û—Ä—Å–∞—Ç–∫–∏—á–ª–∞—Ä",
                    "“ö–∏—à–ª–æ“õ —Ö—û–∂–∞–ª–∏–≥–∏ –≤–∞ —Å–∞–Ω–æ–∞—Ç –∞—Ä–∞–ª–∞—à",
                    "–†–∏–≤–æ–∂–ª–∞–Ω–∏—à —Å–∞–ª–æ“≥–∏—è—Ç–∏ —é“õ–æ—Ä–∏",
                    "–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞–¥–∞ –∞–π—Ä–∏–º –∫–∞–º—á–∏–ª–∏–∫–ª–∞—Ä"
                ],
                recommendations: {
                    economic: [
                        {action: "“ö–∏—à–ª–æ“õ —Ö—û–∂–∞–ª–∏–≥–∏ –º–∞“≥—Å—É–ª–æ—Ç–ª–∞—Ä–∏–Ω–∏ “õ–∞–π—Ç–∞ –∏—à–ª–∞—à –∫–æ—Ä—Ö–æ–Ω–∞–ª–∞—Ä–∏–Ω–∏ –∫—û–ø–∞–π—Ç–∏—Ä–∏—à", result: "“ö—û—à–∏–º—á–∞ “õ–∏–π–º–∞—Ç –≤–∞ –∏—à —û—Ä–∏–Ω–ª–∞—Ä–∏"},
                        {action: "–ö–∏—á–∏–∫ –±–∏–∑–Ω–µ—Å —É—á—É–Ω –∏–º—Ç–∏—ë–∑–ª–∏ –∫—Ä–µ–¥–∏—Ç –ª–∏–Ω–∏—è–ª–∞—Ä–∏ –æ—á–∏—à", result: "–¢–∞–¥–±–∏—Ä–∫–æ—Ä–ª–∏–∫ —Ñ–∞–æ–ª–ª–∏–≥–∏–Ω–∏ –æ—à–∏—Ä–∏—à"},
                        {action: "–°–∞–Ω–æ–∞—Ç –∑–æ–Ω–∞–ª–∞—Ä–∏–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–ª–∞—Ä–Ω–∏ –∂–∞–ª–± “õ–∏–ª–∏—à"}
                    ],
                    social: [
                        {action: "–ö–∞—Å–±-“≥—É–Ω–∞—Ä —Ç–∞—ä–ª–∏–º–∏ –º–∞—Ä–∫–∞–∑–ª–∞—Ä–∏–Ω–∏ –∫–µ–Ω–≥–∞–π—Ç–∏—Ä–∏—à", result: "–ú–∞–ª–∞–∫–∞–ª–∏ –∏—à—á–∏ –∫—É—á–∏"},
                        {action: "–°–æ“ì–ª–∏“õ–Ω–∏ —Å–∞“õ–ª–∞—à —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–∏ —Å–∏—Ñ–∞—Ç–∏–Ω–∏ –æ—à–∏—Ä–∏—à", result: "–ê“≥–æ–ª–∏ —Å–∞–ª–æ–º–∞—Ç–ª–∏–≥–∏–Ω–∏ —è—Ö—à–∏–ª–∞—à"}
                    ],
                    demographic: [
                        {action: "–Å—à–ª–∞—Ä —É—á—É–Ω —É–π-–∂–æ–π –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏", result: "–Å—à–ª–∞—Ä–Ω–∏ —Ç—É–º–∞–Ω–¥–∞ —É—à–ª–∞–± “õ–æ–ª–∏—à"},
                        {action: "–û–∏–ª–∞–≤–∏–π —Ç–∞–¥–±–∏—Ä–∫–æ—Ä–ª–∏–∫–Ω–∏ “õ—û–ª–ª–∞–±-“õ—É–≤–≤–∞—Ç–ª–∞—à", result: "–ë–∞—Ä“õ–∞—Ä–æ—Ä –¥–∞—Ä–æ–º–∞–¥ –º–∞–Ω–±–∞–∏"}
                    ],
                    infrastructure: [
                        {action: "–ô—û–ª –∏–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞—Å–∏–Ω–∏ —è—Ö—à–∏–ª–∞—à", result: "–ë–æ–∑–æ—Ä–ª–∞—Ä–≥–∞ —á–∏“õ–∏—à –∏–º–∫–æ–Ω–∏—è—Ç–∏"},
                        {action: "–≠–ª–µ–∫—Ç—Ä —Ç–∞—ä–º–∏–Ω–æ—Ç–∏ –∏—à–æ–Ω—á–ª–∏–ª–∏–≥–∏–Ω–∏ –æ—à–∏—Ä–∏—à", result: "–ò—à–ª–∞–± —á–∏“õ–∞—Ä–∏—à –±–∞—Ä“õ–∞—Ä–æ—Ä–ª–∏–≥–∏"}
                    ]
                }
            },
            3: { // –ö–ª–∞—Å—Ç–µ—Ä 3 - –é—Ä—Ç–∞—á–∞ –ø–∞—Å—Ç
                title: "–é–†–¢–ê–ß–ê –ü–ê–°–¢ –†–ò–í–û–ñ–õ–ê–ù–ì–ê–ù –¢–£–ú–ê–ù–õ–ê–†",
                indexRange: "0.35 - 0.50",
                color: "#ffc107",
                characteristics: [
                    "“ö–∏—à–ª–æ“õ —Ö—û–∂–∞–ª–∏–≥–∏–≥–∞ —é“õ–æ—Ä–∏ –±–æ“ì–ª–∏“õ–ª–∏–∫",
                    "–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞ –µ—Ç–∞—Ä–ª–∏ —ç–º–∞—Å",
                    "–ò—à—Å–∏–∑–ª–∏–∫ –¥–∞—Ä–∞–∂–∞—Å–∏ —û—Ä—Ç–∞—á–∞–¥–∞–Ω —é“õ–æ—Ä–∏",
                    "–Å—à–ª–∞—Ä –º–∏–≥—Ä–∞—Ü–∏—è—Å–∏ –º—É–∞–º–º–æ—Å–∏"
                ],
                recommendations: {
                    economic: [
                        {action: "“ö–∏—à–ª–æ“õ —Ö—û–∂–∞–ª–∏–≥–∏–Ω–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è “õ–∏–ª–∏—à (–∏–Ω—Ç–µ–Ω—Å–∏–≤ –±–æ“ì–¥–æ—Ä—á–∏–ª–∏–∫, –∏—Å—Å–∏“õ—Ö–æ–Ω–∞–ª–∞—Ä)", result: "–î–∞—Ä–æ–º–∞–¥–Ω–∏ –æ—à–∏—Ä–∏—à, –º–∞–≤—Å—É–º–∏–π–ª–∏–∫–Ω–∏ –∫–∞–º–∞–π—Ç–∏—Ä–∏—à"},
                        {action: "–ê–≥—Ä–æ—Ç—É—Ä–∏–∑–º –≤–∞ “õ–∏—à–ª–æ“õ —Ç—É—Ä–∏–∑–º–∏–Ω–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω—Ç–∏—Ä–∏—à", result: "“ö—û—à–∏–º—á–∞ –¥–∞—Ä–æ–º–∞–¥ –º–∞–Ω–±–∞–∏"},
                        {action: "“≤—É–Ω–∞—Ä–º–∞–Ω–¥—á–∏–ª–∏–∫–Ω–∏ —Ç–∏–∫–ª–∞—à –≤–∞ —Ä–∏–≤–æ–∂–ª–∞–Ω—Ç–∏—Ä–∏—à", result: "–ê–Ω—ä–∞–Ω–∞–≤–∏–π –∫–∞—Å–±–ª–∞—Ä –≤–∞ —Ç—É—Ä–∏–∑–º"}
                    ],
                    social: [
                        {action: "–ú–∞—Å–æ—Ñ–∞–≤–∏–π —Ç–∞—ä–ª–∏–º –≤–∞ —Ç–µ–ª–µ–º–µ–¥–∏—Ü–∏–Ω–∞ —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–∏–Ω–∏ –∂–æ—Ä–∏–π —ç—Ç–∏—à", result: "–•–∏–∑–º–∞—Ç–ª–∞—Ä–≥–∞ “õ—É–ª–∞–π –∫–∏—Ä–∏—à"},
                        {action: "–ò–∂—Ç–∏–º–æ–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏–Ω–∏ –∫–µ–Ω–≥–∞–π—Ç–∏—Ä–∏—à", result: "–ö–∞–º–±–∞“ì–∞–ª–ª–∏–∫–Ω–∏ “õ–∏—Å“õ–∞—Ä—Ç–∏—Ä–∏—à"},
                        {action: "–ê—ë–ª–ª–∞—Ä –±–∞–Ω–¥–ª–∏–≥–∏–Ω–∏ –æ—à–∏—Ä—É–≤—á–∏ –¥–∞—Å—Ç—É—Ä–ª–∞—Ä", result: "–û–∏–ª–∞ –¥–∞—Ä–æ–º–∞–¥–∏–Ω–∏ –∫—û–ø–∞–π—Ç–∏—Ä–∏—à"}
                    ],
                    demographic: [
                        {action: "–ú–∞“≥–∞–ª–ª–∏–π –∏—à —û—Ä–∏–Ω–ª–∞—Ä–∏ —è—Ä–∞—Ç–∏—à –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏", result: "–ú–∏–≥—Ä–∞—Ü–∏—è–Ω–∏ –∫–∞–º–∞–π—Ç–∏—Ä–∏—à"},
                        {action: "–Å—à –º—É—Ç–∞—Ö–∞—Å—Å–∏—Å–ª–∞—Ä–Ω–∏ –∂–∞–ª–± “õ–∏–ª–∏—à —É—á—É–Ω —Ä–∞“ì–±–∞—Ç–ª–∞—Ä", result: "–ö–∞–¥—Ä–ª–∞—Ä —Å–∞–ª–æ“≥–∏—è—Ç–∏–Ω–∏ –æ—à–∏—Ä–∏—à"}
                    ],
                    infrastructure: [
                        {action: "–ò—á–∏–º–ª–∏–∫ —Å—É–≤–∏ –≤–∞ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∏–∑–∏–º–ª–∞—Ä–∏–Ω–∏ —è—Ö—à–∏–ª–∞—à", result: "–¢—É—Ä–º—É—à —Å–∏—Ñ–∞—Ç–∏–Ω–∏ –æ—à–∏—Ä–∏—à"},
                        {action: "–ú–∞–∫—Ç–∞–±–≥–∞—á–∞ —Ç–∞—ä–ª–∏–º –º—É–∞—Å—Å–∞—Å–∞–ª–∞—Ä–∏–Ω–∏ –∫—û–ø–∞–π—Ç–∏—Ä–∏—à", result: "–ê—ë–ª–ª–∞—Ä –±–∞–Ω–¥–ª–∏–≥–∏–Ω–∏ –æ—à–∏—Ä–∏—à"},
                        {action: "–ô—û–ª –≤–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∞–ª–æ“õ–∞—Å–∏–Ω–∏ —è—Ö—à–∏–ª–∞—à", result: "–ë–æ–∑–æ—Ä–ª–∞—Ä–≥–∞ —á–∏“õ–∏—à"}
                    ]
                }
            },
            4: { // –ö–ª–∞—Å—Ç–µ—Ä 4 - –ü–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω
                title: "–ü–ê–°–¢ –†–ò–í–û–ñ–õ–ê–ù–ì–ê–ù –¢–£–ú–ê–ù–õ–ê–†",
                indexRange: "0.00 - 0.35",
                color: "#dc3545",
                characteristics: [
                    "–≠–Ω–≥ –ø–∞—Å—Ç –∏“õ—Ç–∏—Å–æ–¥–∏–π –∫—û—Ä—Å–∞—Ç–∫–∏—á–ª–∞—Ä",
                    "–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞ –∂—É–¥–∞ –∑–∞–∏—Ñ",
                    "–Æ“õ–æ—Ä–∏ –∏—à—Å–∏–∑–ª–∏–∫ –≤–∞ –∫–∞–º–±–∞“ì–∞–ª–ª–∏–∫",
                    "–ß–µ–∫–∫–∞ “≥—É–¥—É–¥–ª–∞—Ä, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –º—É–∞–º–º–æ–ª–∞—Ä–∏"
                ],
                recommendations: {
                    economic: [
                        {action: "–î–∞–≤–ª–∞—Ç –º–∞“õ—Å–∞–¥–ª–∏ –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏ –≤–∞ —Å—É–±—Å–∏–¥–∏—è–ª–∞—Ä –æ—Ä“õ–∞–ª–∏ “õ—û–ª–ª–∞–±-“õ—É–≤–≤–∞—Ç–ª–∞—à", result: "–ë–∞–∑–∞–≤–∏–π –∏“õ—Ç–∏—Å–æ–¥–∏–π —Ä–∏–≤–æ–∂–ª–∞–Ω–∏—à"},
                        {action: "–ú–∞“≥–∞–ª–ª–∏–π —Ö–æ–º –∞—à—ë–≥–∞ –∞—Å–æ—Å–ª–∞–Ω–≥–∞–Ω –∫–∏—á–∏–∫ –∏—à–ª–∞–± —á–∏“õ–∞—Ä–∏—à–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–ò—à —û—Ä–∏–Ω–ª–∞—Ä–∏ —è—Ä–∞—Ç–∏—à"},
                        {action: "–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤ —Ö—û–∂–∞–ª–∏–∫–ª–∞—Ä–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–ú–∞—Å—à—Ç–∞–± —Å–∞–º–∞—Ä–∞–¥–æ—Ä–ª–∏–≥–∏"},
                        {action: "–ú–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏–Ω–∏ –∫–µ–Ω–≥–∞–π—Ç–∏—Ä–∏—à", result: "–ö–∏—á–∏–∫ —Ç–∞–¥–±–∏—Ä–∫–æ—Ä–ª–∏–∫–Ω–∏ “õ—û–ª–ª–∞–±-“õ—É–≤–≤–∞—Ç–ª–∞—à"}
                    ],
                    social: [
                        {action: "–ò–∂—Ç–∏–º–æ–∏–π —ë—Ä–¥–∞–º –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏–Ω–∏ –∫—É—á–∞–π—Ç–∏—Ä–∏—à", result: "–ö–∞–º–±–∞“ì–∞–ª–ª–∏–∫–Ω–∏ —é–º—à–∞—Ç–∏—à"},
                        {action: "–ú–æ–±–∏–ª —Ç–∏–±–±–∏–π —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–°–æ“ì–ª–∏“õ–Ω–∏ —Å–∞“õ–ª–∞—à —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–∏–≥–∞ –∫–∏—Ä–∏—à"},
                        {action: "–ö–∞—Å–±-“≥—É–Ω–∞—Ä —û—Ä–≥–∞—Ç–∏—à –∫—É—Ä—Å–ª–∞—Ä–∏–Ω–∏ —Ç–∞—à–∫–∏–ª —ç—Ç–∏—à", result: "–ë–∞–Ω–¥–ª–∏–∫–Ω–∏ –æ—à–∏—Ä–∏—à"},
                        {action: "–ú–∞–∫—Ç–∞–± —û“õ—É–≤—á–∏–ª–∞—Ä–∏ —É—á—É–Ω –±–µ–ø—É–ª –æ–≤“õ–∞—Ç–ª–∞–Ω–∏—à", result: "–ë–æ–ª–∞–ª–∞—Ä —Å–∞–ª–æ–º–∞—Ç–ª–∏–≥–∏"}
                    ],
                    demographic: [
                        {action: "–Å—à –º—É—Ç–∞—Ö–∞—Å—Å–∏—Å–ª–∞—Ä —É—á—É–Ω —É–π-–∂–æ–π –≤–∞ —Ä–∞“ì–±–∞—Ç–ª–∞–Ω—Ç–∏—Ä–∏—à –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏", result: "–ö–∞–¥—Ä–ª–∞—Ä–Ω–∏ –∂–∞–ª–± “õ–∏–ª–∏—à"},
                        {action: "–û–∏–ª–∞–≤–∏–π —Ç–∞–¥–±–∏—Ä–∫–æ—Ä–ª–∏–∫–Ω–∏ “õ—û–ª–ª–∞–±-“õ—É–≤–≤–∞—Ç–ª–∞—à", result: "–û–∏–ª–∞–ª–∞—Ä–Ω–∏ —É—à–ª–∞–± “õ–æ–ª–∏—à"},
                        {action: "–†–µ–ø—Ä–æ–¥—É–∫—Ç–∏–≤ —Å–æ“ì–ª–∏“õ —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–∏–Ω–∏ —è—Ö—à–∏–ª–∞—à", result: "–û–Ω–∞–ª–∞—Ä –≤–∞ –±–æ–ª–∞–ª–∞—Ä —Å–∞–ª–æ–º–∞—Ç–ª–∏–≥–∏"}
                    ],
                    infrastructure: [
                        {action: "–ê—Å–æ—Å–∏–π –∏–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞–Ω–∏ –±–∞—Ä–ø–æ —ç—Ç–∏—à (–π—û–ª–ª–∞—Ä, —ç–ª–µ–∫—Ç—Ä, —Å—É–≤)", result: "–ë–∞–∑–∞–≤–∏–π —à–∞—Ä–æ–∏—Ç–ª–∞—Ä–Ω–∏ —è—Ä–∞—Ç–∏—à"},
                        {action: "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–∞ –º–æ–±–∏–ª –∞–ª–æ“õ–∞–Ω–∏ –∫–µ–Ω–≥–∞–π—Ç–∏—Ä–∏—à", result: "–†–∞“õ–∞–º–ª–∏ —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–≥–∞ –∫–∏—Ä–∏—à"},
                        {action: "–ú–∞–∫—Ç–∞–± –±–∏–Ω–æ–ª–∞—Ä–∏–Ω–∏ —Ç–∞—ä–º–∏—Ä–ª–∞—à –≤–∞ –∂–∏“≥–æ–∑–ª–∞—à", result: "–¢–∞—ä–ª–∏–º —Å–∏—Ñ–∞—Ç–∏–Ω–∏ –æ—à–∏—Ä–∏—à"},
                        {action: "–§–µ–ª—å–¥—à–µ—Ä-–∞–∫—É—à–µ—Ä–ª–∏–∫ –ø—É–Ω–∫—Ç–ª–∞—Ä–∏–Ω–∏ “õ—É—Ä–∏—à", result: "–¢–∏–±–±–∏–π —Ö–∏–∑–º–∞—Ç–ª–∞—Ä–≥–∞ –∫–∏—Ä–∏—à"}
                    ]
                }
            }
        };

        // –£–º—É–º–≤–∏–ª–æ—è—Ç —Ç–∞–≤—Å–∏—è–ª–∞—Ä–∏
        const REGIONAL_RECOMMENDATIONS = [
            {title: "“≤—É–¥—É–¥–∏–π —Ç–µ–Ω–≥–ª–∞—à—Ç–∏—Ä–∏—à —Ñ–æ–Ω–¥–∏", desc: "–Æ“õ–æ—Ä–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω —Ç—É–º–∞–Ω–ª–∞—Ä–¥–∞–Ω –ø–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω–ª–∞—Ä–≥–∞ –º–∞–±–ª–∞“ì –π—û–Ω–∞–ª—Ç–∏—Ä–∏—à"},
            {title: "–ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä–∞—Ä–æ “≥–∞–º–∫–æ—Ä–ª–∏–∫", desc: "–†–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω —Ç—É–º–∞–Ω–ª–∞—Ä–Ω–∏–Ω–≥ –ø–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω–ª–∞—Ä –±–∏–ª–∞–Ω —à–µ—Ä–∏–∫–ª–∏–∫ –¥–∞—Å—Ç—É—Ä–ª–∞—Ä–∏"},
            {title: "–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª —Å–æ–ª–∏“õ —Å–∏—ë—Å–∞—Ç–∏", desc: "–ü–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω —Ç—É–º–∞–Ω–ª–∞—Ä–¥–∞ —Å–æ–ª–∏“õ –∏–º—Ç–∏—ë–∑–ª–∞—Ä–∏"},
            {title: "–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞ —Ç–µ–Ω–≥–ª–∞—à—Ç–∏—Ä–∏—à", desc: "–ü–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω —Ç—É–º–∞–Ω–ª–∞—Ä–¥–∞ –∏–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞–≥–∞ —É—Å—Ç—É–≤–æ—Ä –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è"},
            {title: "–ö–∞–¥—Ä–ª–∞—Ä –∞–ª–º–∞—à–∏–Ω—É–≤–∏", desc: "–Æ“õ–æ—Ä–∏ –º–∞–ª–∞–∫–∞–ª–∏ –∫–∞–¥—Ä–ª–∞—Ä–Ω–∏ –ø–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω —Ç—É–º–∞–Ω–ª–∞—Ä–≥–∞ –∂–∞–ª–± “õ–∏–ª–∏—à –º–µ—Ö–∞–Ω–∏–∑–º–ª–∞—Ä–∏"}
        ];

        // =====================================================
        // –§–û–†–ú–ê –Ø–†–ê–¢–ò–®
        // =====================================================
        
        function generateForms() {
            let html = '';
            
            for (const [direction, indicators] of Object.entries(INDICATORS)) {
                html += `
                    <div class="indicator-group">
                        <h5><i class="bi ${DIRECTION_ICONS[direction]}" style="color: ${DIRECTION_COLORS[direction]}"></i> ${direction} –ö–é–†–°–ê–¢–ö–ò–ß–õ–ê–†</h5>
                `;
                
                for (const [code, info] of Object.entries(indicators)) {
                    html += `
                        <div class="card mb-3">
                            <div class="card-header py-2">
                                <strong>${code}</strong>: ${info.name} <small class="text-light">(${info.unit})</small>
                            </div>
                            <div class="card-body py-2">
                                <div class="row">
                    `;
                    
                    for (const district of DISTRICTS) {
                        html += `
                            <div class="col-lg-2 col-md-3 col-sm-4 col-6 district-input">
                                <label class="district-label">${district}</label>
                                <input type="number" class="form-control form-control-sm indicator-input" 
                                       data-indicator="${code}" 
                                       data-district="${district}"
                                       placeholder="0" step="0.01">
                            </div>
                        `;
                    }
                    
                    html += `
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                html += `</div>`;
            }
            
            document.getElementById('indicatorForms').innerHTML = html;
        }

        // =====================================================
        // –°–¢–ê–¢–ò–°–¢–ò–ö –§–£–ù–ö–¶–ò–Ø–õ–ê–†
        // =====================================================
        
        function mean(arr) {
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }
        
        function std(arr) {
            const m = mean(arr);
            return Math.sqrt(arr.reduce((acc, val) => acc + Math.pow(val - m, 2), 0) / (arr.length - 1));
        }
        
        function calculateCV(values) {
            const m = mean(values);
            const s = std(values);
            return m !== 0 ? (s / m) * 100 : 0;
        }
        
        function calculateGini(values) {
            const sorted = [...values].sort((a, b) => a - b);
            const n = sorted.length;
            const sum = sorted.reduce((a, b) => a + b, 0);
            if (sum === 0) return 0;
            
            let giniSum = 0;
            for (let i = 0; i < n; i++) {
                giniSum += (2 * (i + 1) - n - 1) * sorted[i];
            }
            return giniSum / (n * sum);
        }
        
        function calculateTheil(values) {
            const m = mean(values);
            if (m === 0) return 0;
            
            const positiveValues = values.filter(v => v > 0);
            if (positiveValues.length === 0) return 0;
            
            const n = positiveValues.length;
            let sum = 0;
            for (const v of positiveValues) {
                sum += (v / m) * Math.log(v / m);
            }
            return sum / n;
        }
        
        function calculateDecile(values) {
            const sorted = [...values].sort((a, b) => a - b);
            const d1Index = Math.floor(sorted.length * 0.1);
            const d9Index = Math.floor(sorted.length * 0.9);
            const d1 = sorted[d1Index];
            const d9 = sorted[d9Index];
            return d1 !== 0 ? d9 / d1 : 999.99;
        }

        // =====================================================
        // –ö–õ–ê–°–¢–ï–†–õ–ê–® (Ward –º–µ—Ç–æ–¥–∏ –∞—Å–æ—Å–∏–¥–∞)
        // =====================================================
        
        function assignClusterByIndex(index) {
            if (index >= 0.70) return 1;
            if (index >= 0.50) return 2;
            if (index >= 0.35) return 3;
            return 4;
        }

        // =====================================================
        // –ú–ê–™–õ–£–ú–û–¢–õ–ê–† –ë–ò–õ–ê–ù –ò–®–õ–ê–®
        // =====================================================
        
        function collectData() {
            const data = {};
            document.querySelectorAll('.indicator-input').forEach(input => {
                const indicator = input.dataset.indicator;
                const district = input.dataset.district;
                const value = parseFloat(input.value) || 0;
                
                if (!data[indicator]) {
                    data[indicator] = {};
                }
                data[indicator][district] = value;
            });
            return data;
        }
        
        function loadSampleData() {
            const year = parseInt(document.getElementById('analysisYear').value);
            const growthFactor = 1 + (year - 2014) * 0.08;
            
            const sampleData = {};
            
            for (const [direction, indicators] of Object.entries(INDICATORS)) {
                for (const code of Object.keys(indicators)) {
                    sampleData[code] = {};
                    
                    for (let i = 0; i < DISTRICTS.length; i++) {
                        const district = DISTRICTS[i];
                        let base;
                        
                        // –¢—É–º–∞–Ω–ª–∞—Ä–≥–∞ —Ö–æ—Å “õ–∏–π–º–∞—Ç–ª–∞—Ä
                        const districtFactor = i < 2 ? 1.5 : (i < 6 ? 1.2 : (i < 10 ? 0.9 : 0.7));
                        
                        if (code === 'D3' || code === 'S3') {
                            base = (3 + Math.random() * 5) / districtFactor;
                        } else if (code.startsWith('D')) {
                            base = (10 + Math.random() * 20) * districtFactor;
                        } else if (code.startsWith('I')) {
                            base = (20 + Math.random() * 80) * districtFactor;
                        } else {
                            base = (100 + Math.random() * 900) * districtFactor;
                        }
                        
                        sampleData[code][district] = Math.round(base * growthFactor * 100) / 100;
                    }
                }
            }
            
            document.querySelectorAll('.indicator-input').forEach(input => {
                const indicator = input.dataset.indicator;
                const district = input.dataset.district;
                if (sampleData[indicator] && sampleData[indicator][district] !== undefined) {
                    input.value = sampleData[indicator][district];
                }
            });
            
            alert(`‚úÖ ${year} –π–∏–ª —É—á—É–Ω –Ω–∞–º—É–Ω–∞–≤–∏–π –º–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä —é–∫–ª–∞–Ω–¥–∏!`);
        }
        
        function clearAllData() {
            document.querySelectorAll('.indicator-input').forEach(input => {
                input.value = '';
            });
            alert('üóëÔ∏è –ë–∞—Ä—á–∞ –º–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä —Ç–æ–∑–∞–ª–∞–Ω–¥–∏!');
        }

        // =====================================================
        // –ê–°–û–°–ò–ô –¢–ê“≤–õ–ò–õ
        // =====================================================
        
        function runAnalysis() {
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            setTimeout(() => {
                try {
                    const data = collectData();
                    const year = document.getElementById('analysisYear').value;
                    
                    // –ú–∞—ä–ª—É–º–æ—Ç–ª–∞—Ä –º–∞–≤–∂—É–¥–ª–∏–≥–∏–Ω–∏ —Ç–µ–∫—à–∏—Ä–∏—à
                    let hasData = false;
                    for (const indicator in data) {
                        for (const district in data[indicator]) {
                            if (data[indicator][district] > 0) {
                                hasData = true;
                                break;
                            }
                        }
                        if (hasData) break;
                    }
                    
                    if (!hasData) {
                        alert('‚ö†Ô∏è –ò–ª—Ç–∏–º–æ—Å, –∫–∞–º–∏–¥–∞ –±–∏—Ç—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—á—É–Ω –º–∞—ä–ª—É–º–æ—Ç –∫–∏—Ä–∏—Ç–∏–Ω–≥!');
                        document.getElementById('loadingOverlay').style.display = 'none';
                        return;
                    }
                    
                    const allIndicatorCodes = Object.values(INDICATORS).flatMap(d => Object.keys(d));
                    const reverseIndicators = ['D3', 'S3'];
                    
                    // 1. –¢–µ–Ω–≥—Å–∏–∑–ª–∏–∫ –∫—û—Ä—Å–∞—Ç–∫–∏—á–ª–∞—Ä–∏
                    const inequalityResults = [];
                    for (const code of allIndicatorCodes) {
                        if (data[code]) {
                            const values = DISTRICTS.map(d => data[code][d] || 0);
                            if (values.some(v => v > 0)) {
                                inequalityResults.push({
                                    indicator: code,
                                    cv: Math.round(calculateCV(values) * 100) / 100,
                                    gini: Math.round(calculateGini(values) * 10000) / 10000,
                                    theil: Math.round(calculateTheil(values) * 10000) / 10000,
                                    decile: Math.round(calculateDecile(values) * 100) / 100
                                });
                            }
                        }
                    }
                    
                    // 2. –ù–æ—Ä–º–∞–ª–ª–∞—à—Ç–∏—Ä–∏—à –≤–∞ –∫–æ–º–ø–ª–µ–∫—Å –∏–Ω–¥–µ–∫—Å
                    const normalizedData = {};
                    for (const code of allIndicatorCodes) {
                        if (data[code]) {
                            const values = DISTRICTS.map(d => data[code][d] || 0);
                            const min = Math.min(...values);
                            const max = Math.max(...values);
                            const range = max - min || 1;
                            
                            normalizedData[code] = {};
                            for (let i = 0; i < DISTRICTS.length; i++) {
                                let normalized = (values[i] - min) / range;
                                if (reverseIndicators.includes(code)) {
                                    normalized = 1 - normalized;
                                }
                                normalizedData[code][DISTRICTS[i]] = normalized;
                            }
                        }
                    }
                    
                    // –ô—û–Ω–∞–ª–∏—à–ª–∞—Ä –±—û–π–∏—á–∞ –∏–Ω–¥–µ–∫—Å–ª–∞—Ä
                    const directionIndices = {};
                    for (const [direction, indicators] of Object.entries(INDICATORS)) {
                        directionIndices[direction] = {};
                        const codes = Object.keys(indicators);
                        
                        for (const district of DISTRICTS) {
                            let sum = 0, count = 0;
                            for (const code of codes) {
                                if (normalizedData[code] && normalizedData[code][district] !== undefined) {
                                    sum += normalizedData[code][district];
                                    count++;
                                }
                            }
                            directionIndices[direction][district] = count > 0 ? sum / count : 0;
                        }
                    }
                    
                    // –ö–æ–º–ø–ª–µ–∫—Å –∏–Ω–¥–µ–∫—Å
                    const compositeIndex = {};
                    for (const district of DISTRICTS) {
                        let sum = 0, count = 0;
                        for (const direction of Object.keys(INDICATORS)) {
                            if (directionIndices[direction][district] !== undefined) {
                                sum += directionIndices[direction][district];
                                count++;
                            }
                        }
                        compositeIndex[district] = count > 0 ? sum / count : 0;
                    }
                    
                    // –†–µ–π—Ç–∏–Ω–≥
                    const ranking = DISTRICTS
                        .map(d => ({
                            district: d, 
                            index: Math.round(compositeIndex[d] * 10000) / 10000,
                            economic: Math.round((directionIndices["–ò“ö–¢–ò–°–û–î–ò–ô"][d] || 0) * 10000) / 10000,
                            social: Math.round((directionIndices["–ò–ñ–¢–ò–ú–û–ò–ô"][d] || 0) * 10000) / 10000,
                            demographic: Math.round((directionIndices["–î–ï–ú–û–ì–†–ê–§–ò–ö"][d] || 0) * 10000) / 10000,
                            infrastructure: Math.round((directionIndices["–ò–ù–§–†–ê–¢–£–ó–ò–õ–ú–ê"][d] || 0) * 10000) / 10000
                        }))
                        .sort((a, b) => b.index - a.index)
                        .map((item, idx) => ({...item, rank: idx + 1, cluster: assignClusterByIndex(item.index)}));
                    
                    // 3. –ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä
                    const clusters = {1: [], 2: [], 3: [], 4: []};
                    for (const item of ranking) {
                        clusters[item.cluster].push(item);
                    }
                    
                    // 4. –£–º—É–º–∏–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    const avgCV = inequalityResults.length > 0 
                        ? Math.round(inequalityResults.reduce((s, r) => s + r.cv, 0) / inequalityResults.length * 100) / 100 
                        : 0;
                    const avgGini = inequalityResults.length > 0 
                        ? Math.round(inequalityResults.reduce((s, r) => s + r.gini, 0) / inequalityResults.length * 10000) / 10000 
                        : 0;
                    
                    let level, levelColor;
                    if (avgCV < 20) { level = '–ü–ê–°–¢'; levelColor = 'success'; }
                    else if (avgCV < 35) { level = '–é–†–¢–ê–ß–ê'; levelColor = 'warning'; }
                    else { level = '–Æ“ö–û–†–ò'; levelColor = 'danger'; }
                    
                    const results = {
                        year,
                        inequality: inequalityResults,
                        ranking,
                        clusters,
                        summary: {
                            avgCV, avgGini, level, levelColor,
                            topDistricts: ranking.slice(0, 3),
                            bottomDistricts: ranking.slice(-3)
                        }
                    };
                    
                    // –ù–∞—Ç–∏–∂–∞–ª–∞—Ä–Ω–∏ –∫—û—Ä—Å–∞—Ç–∏—à
                    displayResults(results);
                    displayClusters(results);
                    displayStrategies(results);
                    
                    window.lastResults = results;
                    
                    // –ù–∞—Ç–∏–∂–∞–ª–∞—Ä —Ç–∞–±–∏–≥–∞ —û—Ç–∏—à
                    bootstrap.Tab.getOrCreateInstance(document.querySelector('a[href="#resultsSection"]')).show();
                    
                } catch (error) {
                    alert('‚ùå –•–∞—Ç–æ–ª–∏–∫: ' + error.message);
                    console.error(error);
                }
                
                document.getElementById('loadingOverlay').style.display = 'none';
            }, 500);
        }

        // =====================================================
        // –ù–ê–¢–ò–ñ–ê–õ–ê–†–ù–ò –ö–é–†–°–ê–¢–ò–®
        // =====================================================
        
        function displayResults(result) {
            const container = document.getElementById('resultsContent');
            
            let html = `
                <div class="row mb-4">
                    <div class="col-md-3 col-6">
                        <div class="result-card">
                            <div class="value">${result.summary.avgCV}%</div>
                            <div class="label">–é—Ä—Ç–∞—á–∞ CV</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="result-card">
                            <div class="value">${result.summary.avgGini}</div>
                            <div class="label">–é—Ä—Ç–∞—á–∞ –ñ–∏–Ω–∏</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="result-card">
                            <div class="value text-${result.summary.levelColor}">${result.summary.level}</div>
                            <div class="label">–¢–µ–Ω–≥—Å–∏–∑–ª–∏–∫ –¥–∞—Ä–∞–∂–∞—Å–∏</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="result-card">
                            <div class="value">${result.year}</div>
                            <div class="label">–¢–∞“≥–ª–∏–ª –π–∏–ª–∏</div>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-trophy-fill"></i> –≠–Ω–≥ —é“õ–æ—Ä–∏ —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω
                            </div>
                            <div class="card-body">
                                ${result.summary.topDistricts.map((d, i) => `
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><strong>${i+1}.</strong> ${d.district}</span>
                                        <span class="badge bg-success">${d.index}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-danger">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-exclamation-triangle-fill"></i> –≠–Ω–≥ –ø–∞—Å—Ç —Ä–∏–≤–æ–∂–ª–∞–Ω–≥–∞–Ω
                            </div>
                            <div class="card-body">
                                ${result.summary.bottomDistricts.map((d, i) => `
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><strong>${result.ranking.length - 2 + i}.</strong> ${d.district}</span>
                                        <span class="badge bg-danger">${d.index}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-table"></i> –¢–µ–Ω–≥—Å–∏–∑–ª–∏–∫ –∫—û—Ä—Å–∞—Ç–∫–∏—á–ª–∞—Ä–∏
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä</th>
                                        <th>CV (%)</th>
                                        <th>–ñ–∏–Ω–∏</th>
                                        <th>–¢–µ–π–ª</th>
                                        <th>–î–µ—Ü–∏–ª</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${result.inequality.map(row => `
                                        <tr>
                                            <td><strong>${row.indicator}</strong></td>
                                            <td class="${row.cv > 35 ? 'text-danger' : row.cv > 20 ? 'text-warning' : 'text-success'}">${row.cv}</td>
                                            <td>${row.gini}</td>
                                            <td>${row.theil}</td>
                                            <td>${row.decile}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <i class="bi bi-award-fill"></i> –¢—É–º–∞–Ω–ª–∞—Ä —Ä–µ–π—Ç–∏–Ω–≥–∏ (–∫–æ–º–ø–ª–µ–∫—Å –∏–Ω–¥–µ–∫—Å)
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-striped">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>–¢—É–º–∞–Ω</th>
                                        <th>–ò–Ω–¥–µ–∫—Å</th>
                                        <th>–ò“õ—Ç–∏—Å–æ–¥–∏–π</th>
                                        <th>–ò–∂—Ç–∏–º–æ–∏–π</th>
                                        <th>–î–µ–º–æ–≥—Ä–∞—Ñ–∏–∫</th>
                                        <th>–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞</th>
                                        <th>–ö–ª–∞—Å—Ç–µ—Ä</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${result.ranking.map(row => `
                                        <tr>
                                            <td><strong>${row.rank}</strong></td>
                                            <td>${row.district}</td>
                                            <td><strong>${row.index}</strong></td>
                                            <td>${row.economic}</td>
                                            <td>${row.social}</td>
                                            <td>${row.demographic}</td>
                                            <td>${row.infrastructure}</td>
                                            <td><span class="cluster-badge cluster-${row.cluster}">${row.cluster}</span></td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="text-center no-print">
                    <button class="btn btn-success" onclick="exportToCSV()">
                        <i class="bi bi-download"></i> CSV —é–∫–ª–∞—à
                    </button>
                    <button class="btn btn-primary" onclick="window.print()">
                        <i class="bi bi-printer"></i> –ß–æ–ø —ç—Ç–∏—à
                    </button>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // =====================================================
        // –ö–õ–ê–°–¢–ï–†–õ–ê–†–ù–ò –ö–é–†–°–ê–¢–ò–®
        // =====================================================
        
        function displayClusters(result) {
            const container = document.getElementById('clusterContent');
            
            let html = '<div class="row">';
            
            for (let clusterNum = 1; clusterNum <= 4; clusterNum++) {
                const clusterData = STRATEGIC_RECOMMENDATIONS[clusterNum];
                const districts = result.clusters[clusterNum] || [];
                
                html += `
                    <div class="col-md-6 mb-4">
                        <div class="cluster-card">
                            <div class="card-header cluster-header-${clusterNum} p-3">
                                <h5 class="mb-1">
                                    <i class="bi bi-${clusterNum === 1 ? 'trophy' : clusterNum === 2 ? 'graph-up' : clusterNum === 3 ? 'dash-circle' : 'exclamation-triangle'}-fill"></i>
                                    –ö–ª–∞—Å—Ç–µ—Ä ${clusterNum}: ${clusterData.title}
                                </h5>
                                <small>–ò–Ω–¥–µ–∫—Å –¥–∏–∞–ø–∞–∑–æ–Ω–∏: ${clusterData.indexRange}</small>
                            </div>
                            <div class="card-body">
                                <h6 class="text-muted mb-2">–•—É—Å—É—Å–∏—è—Ç–ª–∞—Ä–∏:</h6>
                                <ul class="small mb-3">
                                    ${clusterData.characteristics.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                                
                                <h6 class="text-muted mb-2">–¢—É–º–∞–Ω–ª–∞—Ä (${districts.length} —Ç–∞):</h6>
                                ${districts.length > 0 ? `
                                    <div class="d-flex flex-wrap gap-1">
                                        ${districts.map(d => `
                                            <span class="badge bg-light text-dark border">
                                                <i class="bi bi-geo-alt"></i> ${d.district} 
                                                <small>(${d.index})</small>
                                            </span>
                                        `).join('')}
                                    </div>
                                ` : '<p class="text-muted small">–ë—É –∫–ª–∞—Å—Ç–µ—Ä–¥–∞ —Ç—É–º–∞–Ω –π—û“õ</p>'}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            html += '</div>';
            
            // –ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Å–∏
            html += `
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-pie-chart-fill"></i> –ö–ª–∞—Å—Ç–µ—Ä–ª–∞—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞—Å–∏
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            ${[1,2,3,4].map(num => `
                                <div class="col-md-3 col-6 mb-3">
                                    <div class="p-3 rounded" style="background: ${STRATEGIC_RECOMMENDATIONS[num].color}20;">
                                        <h3 class="mb-0" style="color: ${STRATEGIC_RECOMMENDATIONS[num].color}">
                                            ${(result.clusters[num] || []).length}
                                        </h3>
                                        <small>–ö–ª–∞—Å—Ç–µ—Ä ${num}</small>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // =====================================================
        // –°–¢–†–ê–¢–ï–ì–ò–ö –¢–ê–í–°–ò–Ø–õ–ê–†–ù–ò –ö–é–†–°–ê–¢–ò–®
        // =====================================================
        
        function displayStrategies(result) {
            const container = document.getElementById('strategyContent');
            
            let html = '';
            
            // “≤–∞—Ä –±–∏—Ä –∫–ª–∞—Å—Ç–µ—Ä —É—á—É–Ω —Ç–∞–≤—Å–∏—è–ª–∞—Ä
            for (let clusterNum = 1; clusterNum <= 4; clusterNum++) {
                const clusterData = STRATEGIC_RECOMMENDATIONS[clusterNum];
                const districts = result.clusters[clusterNum] || [];
                
                if (districts.length === 0) continue;
                
                html += `
                    <div class="card mb-4">
                        <div class="card-header cluster-header-${clusterNum}">
                            <h5 class="mb-0">
                                <i class="bi bi-lightbulb-fill"></i> 
                                –ö–ª–∞—Å—Ç–µ—Ä ${clusterNum}: ${clusterData.title}
                            </h5>
                            <small>–¢—É–º–∞–Ω–ª–∞—Ä: ${districts.map(d => d.district).join(', ')}</small>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6><span class="strategy-icon economic"><i class="bi bi-currency-dollar"></i></span> –ò“õ—Ç–∏—Å–æ–¥–∏–π —Ç–∞–≤—Å–∏—è–ª–∞—Ä</h6>
                                    ${clusterData.recommendations.economic.map(r => `
                                        <div class="recommendation-card economic">
                                            <strong>${r.action}</strong>
                                            <br><small class="text-success"><i class="bi bi-arrow-right"></i> ${r.result}</small>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="col-md-6">
                                    <h6><span class="strategy-icon social"><i class="bi bi-people-fill"></i></span> –ò–∂—Ç–∏–º–æ–∏–π —Ç–∞–≤—Å–∏—è–ª–∞—Ä</h6>
                                    ${clusterData.recommendations.social.map(r => `
                                        <div class="recommendation-card social">
                                            <strong>${r.action}</strong>
                                            <br><small class="text-info"><i class="bi bi-arrow-right"></i> ${r.result}</small>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <h6><span class="strategy-icon demographic"><i class="bi bi-person-lines-fill"></i></span> –î–µ–º–æ–≥—Ä–∞—Ñ–∏–∫ —Ç–∞–≤—Å–∏—è–ª–∞—Ä</h6>
                                    ${clusterData.recommendations.demographic.map(r => `
                                        <div class="recommendation-card demographic">
                                            <strong>${r.action}</strong>
                                            <br><small class="text-purple"><i class="bi bi-arrow-right"></i> ${r.result}</small>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="col-md-6">
                                    <h6><span class="strategy-icon infrastructure"><i class="bi bi-building"></i></span> –ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞ —Ç–∞–≤—Å–∏—è–ª–∞—Ä</h6>
                                    ${clusterData.recommendations.infrastructure.map(r => `
                                        <div class="recommendation-card infrastructure">
                                            <strong>${r.action}</strong>
                                            <br><small class="text-warning"><i class="bi bi-arrow-right"></i> ${r.result}</small>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // –£–º—É–º–≤–∏–ª–æ—è—Ç —Ç–∞–≤—Å–∏—è–ª–∞—Ä–∏
            html += `
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-globe"></i> –£–ú–£–ú–í–ò–õ–û–Ø–¢ –ë–é–ô–ò–ß–ê –¢–ê–í–°–ò–Ø–õ–ê–†
                        </h5>
                        <small>“≤—É–¥—É–¥–∏–π —Ç–µ–Ω–≥—Å–∏–∑–ª–∏–∫–Ω–∏ –∫–∞–º–∞–π—Ç–∏—Ä–∏—à –º–µ—Ö–∞–Ω–∏–∑–º–ª–∞—Ä–∏</small>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            ${REGIONAL_RECOMMENDATIONS.map((r, i) => `
                                <div class="col-md-6 mb-3">
                                    <div class="d-flex align-items-start">
                                        <span class="badge bg-primary me-2">${i + 1}</span>
                                        <div>
                                            <strong>${r.title}</strong>
                                            <br><small class="text-muted">${r.desc}</small>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            // –ß–æ–ø —ç—Ç–∏—à —Ç—É–≥–º–∞—Å–∏
            html += `
                <div class="text-center mt-4 no-print">
                    <button class="btn btn-primary btn-lg" onclick="window.print()">
                        <i class="bi bi-printer-fill"></i> –¢–∞–≤—Å–∏—è–ª–∞—Ä–Ω–∏ —á–æ–ø —ç—Ç–∏—à
                    </button>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // =====================================================
        // –≠–ö–°–ü–û–†–¢
        // =====================================================
        
        function exportToCSV() {
            if (!window.lastResults) {
                alert('–ê–≤–≤–∞–ª —Ç–∞“≥–ª–∏–ª–Ω–∏ –±–∞–∂–∞—Ä–∏–Ω–≥!');
                return;
            }
            
            const result = window.lastResults;
            let csv = '“≤–£–î–£–î–ò–ô –¢–ï–ù–ì–°–ò–ó–õ–ò–ö –¢–ê“≤–õ–ò–õ–ò –ù–ê–¢–ò–ñ–ê–õ–ê–†–ò\n';
            csv += `–¢–∞“≥–ª–∏–ª –π–∏–ª–∏: ${result.year}\n\n`;
            
            csv += '–¢–ï–ù–ì–°–ò–ó–õ–ò–ö –ö–é–†–°–ê–¢–ö–ò–ß–õ–ê–†–ò\n';
            csv += '–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä,CV (%),–ñ–∏–Ω–∏,–¢–µ–π–ª,–î–µ—Ü–∏–ª\n';
            for (const row of result.inequality) {
                csv += `${row.indicator},${row.cv},${row.gini},${row.theil},${row.decile}\n`;
            }
            
            csv += '\n–¢–£–ú–ê–ù–õ–ê–† –†–ï–ô–¢–ò–ù–ì–ò\n';
            csv += '–†–µ–π—Ç–∏–Ω–≥,–¢—É–º–∞–Ω,–ö–æ–º–ø–ª–µ–∫—Å –∏–Ω–¥–µ–∫—Å,–ò“õ—Ç–∏—Å–æ–¥–∏–π,–ò–∂—Ç–∏–º–æ–∏–π,–î–µ–º–æ–≥—Ä–∞—Ñ–∏–∫,–ò–Ω—Ñ—Ä–∞—Ç—É–∑–∏–ª–º–∞,–ö–ª–∞—Å—Ç–µ—Ä\n';
            for (const row of result.ranking) {
                csv += `${row.rank},${row.district},${row.index},${row.economic},${row.social},${row.demographic},${row.infrastructure},${row.cluster}\n`;
            }
            
            csv += '\n–ö–õ–ê–°–¢–ï–†–õ–ê–†\n';
            for (let i = 1; i <= 4; i++) {
                const districts = result.clusters[i] || [];
                csv += `–ö–ª–∞—Å—Ç–µ—Ä ${i}: ${districts.map(d => d.district).join('; ')}\n`;
            }
            
            const blob = new Blob(['\ufeff' + csv], {type: 'text/csv;charset=utf-8;'});
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `hududiy_tengsizlik_${result.year}.csv`;
            link.click();
        }

        // =====================================================
        // –ë–û–®–õ–ê–®
        // =====================================================
        
        document.addEventListener('DOMContentLoaded', function() {
            generateForms();
        });
    </script>
</body>
</html>
